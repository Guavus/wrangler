# Cheatsheet

| Name                             | Usage                                                                              | Description                                                                                                                                                        |
| -------------------------------- | ---------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|  MERGE                           |  merge <column1> <column2> <new-column> <separator>                                |  Merges values from two columns using a separator into a new column.                                                                                               |
|  SET-RECORD-DELIM                |  set-record-delim <column> <delimiter> [<limit>]                                   |  Sets the record delimiter.                                                                                                                                        |
|  FAIL                            |  fail <condition>                                                                  |  Fails when the condition is evaluated to true.                                                                                                                    |
|  ENCODE                          |  encode <base32|base64|hex> <column>                                               |  Encodes column values using one of base32, base64, or hex.                                                                                                        |
|  PARSE-AS-LOG                    |  parse-as-log <column> <format>                                                    |  Parses Apache HTTPD and NGINX logs.                                                                                                                               |
|  DIFF-DATE                       |  diff-date <column1> <column2> <destination>                                       |  Calculates the difference in milliseconds between two Date objects.Positive if <column2> earlier. Must use 'parse-as-date' or 'parse-as-simple-date' first.       |
|  GENERATE-UUID                   |  generate-uuid <column>                                                            |  Populates a column with a universally unique identifier (UUID) of the record.                                                                                     |
|  PARSE-AS-AVRO-FILE              |  parse-as-avro-file <column>                                                       |  parse-as-avro-file <column>.                                                                                                                                      |
|  SWAP                            |  swap <column1> <column2>                                                          |  Swaps the column names of two columns.                                                                                                                            |
|  SET COLUMN                      |  set column <column> <jexl-expression>                                             |  Sets a column by evaluating a JEXL expression.                                                                                                                    |
|  PARSE-AS-HL7                    |  parse-as-hl7 <column> [<depth>]                                                   |  Parses <column> for Health Level 7 Version 2 (HL7 V2) messages; <depth> indicates at which point JSON object enumeration terminates.                              |
|  WRITE-AS-JSON-MAP               |  write-as-json-map <column>                                                        |  Writes all record columns as JSON map.                                                                                                                            |
|  URL-DECODE                      |  url-decode <column>                                                               |  URL decode a column value.                                                                                                                                        |
|  PARSE-AS-PROTOBUF               |  parse-as-protobuf <column> <schema-id> <record-name> [version]                    |  Parses column as protobuf encoded memory representations.                                                                                                         |
|  COLUMNS-REPLACE                 |  columns-replace <sed-expression>                                                  |  Modifies column names in bulk using a sed-format expression.                                                                                                      |
|  FILTER-ROW-IF-MATCHED           |  filter-row-if-matched <column> <regex>                                            |  [DEPRECATED] Filters rows if the regex is matched. Use 'filter-rows-on' instead.                                                                                  |
|  FILL-NULL-OR-EMPTY              |  fill-null-or-empty <column> <fixed-value>                                         |  Fills a value of a column with a fixed value if it is either null or empty.                                                                                       |
|  FLATTEN                         |  flatten <column>[,<column>*]                                                      |  Separates array elements of one or more columns into indvidual records, copying the other columns.                                                                |
|  PARSE-AS-FIXED-LENGTH           |  parse-as-fixed-length <column> <width>[,<width>*] [<padding-character>]           |  Parses fixed-length records using the specified widths and padding-character.                                                                                     |
|  PARSE-AS-CSV                    |  parse-as-csv <column> <delimiter> [<header=true|false>]                           |  Parses a column as CSV (comma-separated values).                                                                                                                  |
|  PARSE-AS-SIMPLE-DATE            |  parse-as-simple-date <column> <format>                                            |  Parses a column as date using format.                                                                                                                             |
|  SPLIT-TO-COLUMNS                |  split-to-columns <column> <regex>                                                 |  Splits a column into one or more columns around matches of the specified regular expression.                                                                      |
|  JSON-PATH                       |  json-path <source> <destination> <json-path-expression>                           |  Parses JSON elements using a DSL (a JSON path expression).                                                                                                        |
|  SPLIT-EMAIL                     |  split-email <column>                                                              |  Split a email into account and domain.                                                                                                                            |
|  DROP                            |  drop <column>[,<column>*]                                                         |  Drop one or more columns.                                                                                                                                         |
|  QUANTIZE                        |  quantize <source> <destination> <[range1:range2)=value>,[<range1:range2=value>]*  |  Quanitize the range of numbers into label values.                                                                                                                 |
|  FILTER-ROW-IF-TRUE              |  filter-row-if-true <condition>                                                    |  [DEPRECATED] Filters rows if condition is evaluated to true. Use 'filter-rows-on' instead.                                                                        |
|  STEMMING                        |  stemming <column>                                                                 |  Apply Porter Stemming on the column value.                                                                                                                        |
|  HASH                            |  hash <column> <algorithm> [<encode=true|false>]                                   |  Creates a message digest for the column using algorithm, replacing the column value.                                                                              |
|  FILTER-ROWS-ON                  |  filter-rows-on empty-or-null-columns <column>[,<column>*]                         |  Filters row that have empty or null columns.                                                                                                                      |
|  SET-VARIABLE                    |  set-variable <variable> <expression>                                              |  Sets the value for a transient variable for the record being processed.                                                                                           |
|  EXTRACT-REGEX-GROUPS            |  extract-regex-groups <column> <regex-with-groups>                                 |  Extracts data from a regex group into its own column.                                                                                                             |
|  XPATH-ARRAY                     |  xpath-array <column> <destination> <xpath>                                        |  Extract XML element or attributes as JSON array using XPath.                                                                                                      |
|  SPLIT-TO-ROWS                   |  split-to-rows <column> <separator>                                                |  Splits a column into multiple rows, copies the rest of the columns.                                                                                               |
|  TEXT-METRIC                     |  text-metric <method> <column1> <column2> <destination>                            |  Calculates the metric for comparing two string values.                                                                                                            |
|  CUT-CHARACTER                   |  cut-character <source> <destination> <type> <range|indexes>                       |  UNIX-like 'cut' directive for splitting text.                                                                                                                     |
|  SET-CHARSET                     |  set-charset <column> <charset>                                                    |  Sets the character set decoding to UTF-8.                                                                                                                         |
|  WRITE-AS-CSV                    |  write-as-csv <column>                                                             |  Writes the records files as well-formatted CSV                                                                                                                    |
|  PARSE-AS-EXCEL                  |  parse-as-excel <column> [<sheet number | sheet name>]                             |  Parses column as Excel file.                                                                                                                                      |
|  MASK-SHUFFLE                    |  mask-shuffle <column>                                                             |  Masks a column value by shuffling characters while maintaining the same length.                                                                                   |
|  PARSE-AS-JSON                   |  parse-as-json <column> [<depth>]                                                  |  Parses a column as JSON.                                                                                                                                          |
|  SPLIT-URL                       |  split-url <column>                                                                |  Split a url into it's components host,protocol,port,etc.                                                                                                          |
|  COPY                            |  copy <source> <destination> [<force=true|false>]                                  |  Copies values from a source column into a destination column.                                                                                                     |
|  SET-TYPE                        |  set-type <column> <type>                                                          |  Converting data type of a column.                                                                                                                                 |
|  WRITE-AS-JSON-OBJECT            |  write-as-json-object <dest-column> [<src-column>[,<src-column>]                   |  Creates a JSON object based on source columns specified. JSON object is written into dest-column.                                                                 |
|  INDEXSPLIT                      |  indexsplit <source> <start> <end> <destination>                                   |  [DEPRECATED] Use the 'split-to-columns' or 'parse-as-fixed-length' directives instead.                                                                            |
|  LOWERCASE                       |  lowercase <column>                                                                |  Changes the column values to lowercase.                                                                                                                           |
|  CLEANSE-COLUMN-NAME             |  cleanse-column-names                                                              |  Sanatizes column names: trims, lowercases, and replaces all but [A-Z][a-z][0-9]_.with an underscore '_'.                                                          |
|  TITLECASE                       |  titlecase <column>                                                                |  Changes the column values to title case.                                                                                                                          |
|  TABLE-LOOKUP                    |  table-lookup <column> <table>                                                     |  Uses the given column as a key to perform a lookup into the specified table.                                                                                      |
|  PARSE-AS-DATE                   |  parse-as-date <column> [<timezone>]                                               |  Parses column values as dates using natural language processing and automatically identifying the format (expensive in terms of time consumed).                   |
|  PARSE-AS-XML                    |  parse-as-xml <column>                                                             |  Parses a column as XML.                                                                                                                                           |
|  KEEP                            |  keep <column>[,<column>*]                                                         |  Keeps the specified columns and drops all others.                                                                                                                 |
|  INCREMENT-VARIABLE              |  increment-variable <variable> <value> <expression>                                |  Wrangler - A interactive tool for data cleansing and transformation.                                                                                              |
|  TEXT-DISTANCE                   |  text-distance <method> <column1> <column2> <destination>                          |  Calculates a text distance measure between two columns containing string.                                                                                         |
|  INVOKE-HTTP                     |  invoke-http <url> <column>[,<column>*] <header>[,<header>*]                       |  [EXPERIMENTAL] Invokes an HTTP endpoint, passing columns as a JSON map (potentially slow).                                                                        |
|  TRIM                            |  trim <column>                                                                     |  Trimming whitespace from both sides of a string.                                                                                                                  |
|  PARSE-AS-AVRO                   |  parse-as-avro <column> <schema-id> <json|binary> [version]                        |  Parses column as AVRO generic record.                                                                                                                             |
|  RTRIM                           |  rtrim <column>                                                                    |  Trimming whitespace from right side of a string.                                                                                                                  |
|  RENAME                          |  rename <old> <new>                                                                |  Renames an existing column.                                                                                                                                       |
|  URL-ENCODE                      |  url-encode <column>                                                               |  URL encode a column value.                                                                                                                                        |
|  CHANGE-COLUMN-CASE              |  change-column-case lower|upper                                                    |  Changes the case of column names to either lowercase or uppercase.                                                                                                |
|  DECODE                          |  decode <base32|base64|hex> <column>                                               |  Decodes column values using one of base32, base64, or hex.                                                                                                        |
|  FORMAT-DATE                     |  format-date <column> <format>                                                     |  Formats a column using a date-time format. Use 'parse-as-date` beforehand.                                                                                        |
|  SET-COLUMN                      |  set-column <column> <expression>                                                  |  Sets a column the result of expression execution.                                                                                                                 |
|  CATALOG-LOOKUP                  |  catalog-lookup <catalog> <column>                                                 |  Looks-up values from pre-loaded (static) catalogs.                                                                                                                |
|  SET COLUMNS                     |  set columns <columm>[,<column>*]                                                  |  Sets the name of columns, in the order they are specified.                                                                                                        |
|  UPPERCASE                       |  uppercase <column>                                                                |  Changes the column values to uppercase.                                                                                                                           |
|  FIND-AND-REPLACE                |  find-and-replace <column> <sed-expression>                                        |  Finds and replaces text in column values using a sed-format expression.                                                                                           |
|  MASK-NUMBER                     |  mask-number <column> <pattern>                                                    |  Masks a column value using the specified masking pattern.                                                                                                         |
|  SPLIT                           |  split <source> <delimiter> <new-column-1> <new-column-2>                          |  [DEPRECATED] Use 'split-to-columns' or 'split-to-rows'.                                                                                                           |
|  XPATH                           |  xpath <column> <destination> <xpath>                                              |  Extract a single XML element or attribute using XPath.                                                                                                            |
|  SEND-TO-ERROR                   |  send-to-error <condition>                                                         |  Send records that match condition to the error collector.                                                                                                         |
|  PARSE-XML-TO-JSON               |  parse-xml-to-json <column> [<depth>]                                              |  Parses a XML document to JSON representation.                                                                                                                     |
|  LTRIM                           |  ltrim <column>                                                                    |  Trimming whitespace from left side of a string.                                                                                                                   |
|  SET FORMAT                      |  set format csv <delimiter> <skip empty lines>                                     |  [DEPRECATED] Parses the predefined column as CSV. Use 'parse-as-csv' instead.                                                                                     |
|  FORMAT-UNIX-TIMESTAMP           |  format-unix-timestamp <column> <format>                                           |  Formats a UNIX timestamp using the specified format                                                                                                               |
|  FILTER-ROW-IF-NOT-MATCHED       |  filter-row-if-not-matched <column> <regex>                                        |  Filters rows if the regex does not match                                                                                                                          |
|  FILTER-ROW-IF-FALSE             |  filter-row-if-false <condition>                                                   |  Filters rows if the condition evaluates to false                                                                                                                  |
